Bootstrap: docker
From: ubuntu:22.04
Stage: spython-base

%post

DEBIAN_FRONTEND=noninteractive
TZ=Europe/Berlin

apt-get update \
&& apt-get -y -qq --no-install-recommends install \
cmake \
make \
mpich \
libmpich-dev \
libxml2-dev \
python3 \
python3-pip \
libdw-dev \
gfortran \
gcc \
g++ \
git \
graphviz \
libgtest-dev \
llvm-12-tools \
llvm-12-dev \
python2.7 \
&& apt-get -yq clean \
&& rm --recursive --force /var/lib/apt/lists/* \
&& pip3 install --no-input --no-cache-dir --disable-pip-version-check 'lit>=14.0.0'

mkdir -p /src
cd /src
%environment
export DEBIAN_FRONTEND=noninteractive
export TZ=Europe/Berlin
%runscript
cd /src
exec /bin/bash "$@"
%startscript
cd /src
exec /bin/bash "$@"

